ZGVmIG51bWJlcnMobik6CiAgICBmb3IgaSBpbiByYW5nZSgxLCBuICsgMSk6CiAgICAgICAgcHJpbnQoaSkKICAgIHByaW50KCkK
ZGVmIGZpYm9uYWNjaShuKToKICAgIGN1cnJlbnQgPSAxCiAgICBuZXh0ID0gMQogICAgZm9yIGkgaW4gcmFuZ2Uobik6CiAgICAgICAgcHJpbnQoY3VycmVudCkKICAgICAgICBuZXh0X25leHQgPSBjdXJyZW50ICsgbmV4dAogICAgICAgIGN1cnJlbnQgPSBuZXh0CiAgICAgICAgbmV4dCA9IG5leHRfbmV4dAo=
ZGVmIGZhY3RvcmlhbChuKToKICAgIHZhbHVlID0gMQogICAgZm9yIGkgaW4gcmFuZ2UoMSwgbiArIDEpOgogICAgICAgIHZhbHVlICo9IGkKICAgIHJldHVybiB2YWx1ZQo=
ZGVmIGFscGhhYmV0KG4pOgogICAgZm9yIGkgaW4gcmFuZ2Uobik6CiAgICAgICAgcHJpbnQoY2hyKG9yZCgnQScpK2klMjYpKQogICAgcHJpbnQoKQo=
ZGVmIGR1cGxpY2F0aW9uKHRleHQpOgogICAgb3V0cHV0ID0gIiIKICAgIGZvciBjaGFyIGluIHRleHQ6CiAgICAgICAgb3V0cHV0ICs9IGNoYXIgKyBjaGFyCiAgICByZXR1cm4gb3V0cHV0Cg==
ZGVmIG5vbnplcm9fcHJvZHVjdChudW1iZXJzKToKICAgIHByb2R1Y3QgPSAxCiAgICBmb3IgbiBpbiBudW1iZXJzOgogICAgICAgIGlmIG4gIT0gMDoKICAgICAgICAgICAgcHJvZHVjdCAqPSBuCiAgICByZXR1cm4gcHJvZHVjdAo=
ZGVmIGRpdmlzb3JzKG4pOgogICAgZm9yIGkgaW4gcmFuZ2UoMSwgbiArIDEpOgogICAgICAgIGlmIG4gJSBpID09IDA6CiAgICAgICAgICAgIHByaW50KGkpCiAgICBwcmludCgpCg==
ZGVmIHNxdWFyZShuKToKICAgIGZvciBpIGluIHJhbmdlKG4pOgogICAgICAgIGZvciBqIGluIHJhbmdlKG4pOgogICAgICAgICAgICBwcmludCgiIyIsIGVuZD0iICIpCiAgICAgICAgcHJpbnQoKQoK
ZGVmIGVtcHR5X3NxdWFyZShuKToKICAgIGZvciBpIGluIHJhbmdlKG4pOgogICAgICAgIGZvciBqIGluIHJhbmdlKG4pOgogICAgICAgICAgICBpZiBpID09IDAgb3IgaiA9PSAwIG9yIGkgPT0gbiAtMSBvciBqID09IG4gLTE6CiAgICAgICAgICAgICAgICBwcmludCgiIyIsIGVuZD0iICIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludCgiLiIsIGVuZD0iICIpCiAgICAgICAgcHJpbnQoKQoK
ZGVmIHB5cmFtaWQobik6CiAgICBmb3IgaSBpbiByYW5nZShuKToKICAgICAgICBmb3IgaiBpbiByYW5nZSgyICogbiAtIDEpOgogICAgICAgICAgICBpZiBqID49IG4gLSAxIC0gaSBhbmQgaiA8PSBuIC0gMSArIGk6CiAgICAgICAgICAgICAgICBwcmludCgnIycsIGVuZD0iICIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludCgnICcsIGVuZD0iICIpCiAgICAgICAgcHJpbnQoKQoK
ZGVmIGNoZXNzYm9hcmQobik6CiAgICBmb3IgaSBpbiByYW5nZShuKToKICAgICAgICBmb3IgaiBpbiByYW5nZShuKToKICAgICAgICAgICAgaWYgKGkgKyBqKSAlIDIgPT0gMDoKICAgICAgICAgICAgICAgIHByaW50KCIjIiwgZW5kPSIgIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KCIuIiwgZW5kPSIgIikKICAgICAgICBwcmludCgpCg==
ZGVmIGJpZ1gobik6CiAgICBmb3IgaSBpbiByYW5nZSgyICogbiAtIDEpOgogICAgICAgIGZvciBqIGluIHJhbmdlKDIgKiBuIC0gMSk6CiAgICAgICAgICAgIGlmIGkgPT0gaiBvciAoMiAqIG4gLSAyKSAtIGkgPT0gajoKICAgICAgICAgICAgICAgIHByaW50KCcjJywgZW5kPSIgIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KCcgJywgZW5kPSIgIikKICAgICAgICBwcmludCgpCgo=
ZGVmIHN0cmluZ19pbnRlcnNlY3Rpb24obGVmdCwgcmlnaHQpOgogICAgY29tbW9uX2xlbmd0aCA9IG1pbihsZW4obGVmdCksIGxlbihyaWdodCkpCiAgICBmb3IgaSBpbiByYW5nZShjb21tb25fbGVuZ3RoKToKICAgICAgICBpZiBsZWZ0W2ldID09IHJpZ2h0W2ldOgogICAgICAgICAgICBwcmludChsZWZ0W2ldKQoK
ZGVmIHBhbGluZHJvbSh0ZXh0KToKICAgIGxlbmd0aCA9IGxlbih0ZXh0KQogICAgZm9yIGkgaW4gcmFuZ2UoaW50KGxlbmd0aC8yKSk6CiAgICAgICAgaWYgdGV4dFtpXSAhPSB0ZXh0W2xlbmd0aCAtIDEgLSBpXToKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICByZXR1cm4gVHJ1ZQoK
ZGVmIGV2ZXJ5X3NlY29uZF9udW1iZXIobnVtX2xpc3QpOgogICAgZm9yIGkgaW4gcmFuZ2UobGVuKG51bV9saXN0KSk6CiAgICAgICAgaWYgaSAlIDIgPT0gMDoKICAgICAgICAgICAgcHJpbnQobnVtX2xpc3RbaV0pCg==
ZGVmIG1heF9wYWlyX3N1bShudW1fbGlzdCk6CiAgICBtID0gMAogICAgZm9yIGkgaW4gcmFuZ2UobGVuKG51bV9saXN0KS0xKToKICAgICAgICBtID0gbWF4KG0sIG51bV9saXN0W2ldICsgbnVtX2xpc3RbaSsxXSkKICAgIHJldHVybiBtICAgIAo=
ZGVmIGZpdmVfbXVsdGlwbGVzKG51bV9saXN0KToKICAgIG91dHB1dCA9IFtdCiAgICBmb3IgbnVtIGluIG51bV9saXN0OgogICAgICAgIGlmIG51bSAlIDUgPT0gMDoKICAgICAgICAgICAgb3V0cHV0LmFwcGVuZChudW0pCiAgICByZXR1cm4gb3V0cHV0Cg==
ZGVmIGRpZ2l0X3N1bShuKTogICAgCiAgICBzID0gMAogICAgd2hpbGUgbiA+IDA6CiAgICAgICAgcyArPSBuICUgMTAKICAgICAgICBuID0gbiAvLyAxMAogICAgcmV0dXJuIHMKCg==
ZGVmIHppZ3phZyh0ZXh0KToKICAgIGxpbmUodGV4dCwgMCkKICAgIGxpbmUodGV4dCwgMSkKICAgIApkZWYgbGluZSh0ZXh0LCBwYXJpdGEpOgogICAgZm9yIGkgaW4gcmFuZ2UobGVuKHRleHQpKToKICAgICAgICBpZiBpICUgMiA9PSBwYXJpdGE6CiAgICAgICAgICAgIHByaW50KHRleHRbaV0sIGVuZD0iIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgiLiIsIGVuZD0iIikKICAgIHByaW50KCkK
ZGVmIGRpdmlzb3JzX2NvdW50KG4pOgogICAgY291bnQgPSAwCiAgICBmb3IgaSBpbiByYW5nZSgxLCBuICsgMSk6CiAgICAgICAgaWYgbiAlIGkgPT0gMDoKICAgICAgICAgICAgY291bnQgKz0gMQogICAgcmV0dXJuIGNvdW50Cg==
ZGVmIHBvd2VycyhiYXNlLCBuKToKICAgIGN1cnJlbnQgPSBiYXNlCiAgICBmb3IgaSBpbiByYW5nZShuKToKICAgICAgICBwcmludChjdXJyZW50KQogICAgICAgIGN1cnJlbnQgPSBjdXJyZW50ICogYmFzZQogICAgcHJpbnQoKQo=
ZGVmIHByaW50X3ByaW1lcyhuKToKICAgIGsgPSAxCiAgICB3aGlsZSBuID4gMDoKICAgICAgICBpZiBkaXZpc29yc19jb3VudChrKSA9PSAyOgogICAgICAgICAgICBwcmludChrKQogICAgICAgICAgICBuIC09IDEKICAgICAgICBrICs9IDEKCmRlZiBkaXZpc29yc19jb3VudChuKToKICAgIGNvdW50ID0gMAogICAgZm9yIGkgaW4gcmFuZ2UoMSwgbiArIDEpOgogICAgICAgIGlmIG4gJSBpID09IDA6CiAgICAgICAgICAgIGNvdW50ICs9IDEKICAgIHJldHVybiBjb3VudAo=
ZGVmIGdyZWF0ZXN0X2NvbW1vbl9kaXZpc29yKGEsIGIpOgogICAgd2hpbGUgYToKICAgICAgICBhLCBiID0gYiAlIGEsIGEKICAgIHJldHVybiBiCg==
ZGVmIGZsYXR0ZW4obGlzdHMpOgogICAgZmxhdF9saXN0ID0gW10KICAgIGZvciBuZXN0ZWRfbGlzdCBpbiBsaXN0czoKICAgICAgICBmb3IgZWxlbWVudCBpbiBuZXN0ZWRfbGlzdDoKICAgICAgICAgICAgZmxhdF9saXN0LmFwcGVuZChlbGVtZW50KQogICAgcmV0dXJuIGZsYXRfbGlzdAo=
ZGVmIGNvdW50X2EodGV4dCk6CiAgICBjb3VudCA9IDAKICAgIGZvciBjaGFyIGluIHRleHQ6CiAgICAgICAgaWYgY2hhci51cHBlcigpID09ICdBJzoKICAgICAgICAgICAgY291bnQgKz0gMQogICAgcmV0dXJuIGNvdW50CiAgICAKCg==
ZGVmIGNlbnNvcnNoaXAodGV4dCk6CiAgICBvdXRwdXQgPSAiIgogICAgaSA9IDEKICAgIGZvciBjaGFyIGluIHRleHQ6CiAgICAgICAgaWYgaSAlIDIgPT0gMDoKICAgICAgICAgICAgb3V0cHV0ICs9ICJYIgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIG91dHB1dCArPSBjaGFyCiAgICAgICAgaSArPSAxCiAgICByZXR1cm4gb3V0cHV0CiAgICAKCg==
ZGVmIGZpcnN0X2xldHRlcnModGV4dCk6CiAgICBmb3Igd29yZCBpbiB0ZXh0LnNwbGl0KCk6CiAgICAgICAgcHJpbnQod29yZFswXSwgZW5kPSIgIikKICAgIHByaW50KCkK
ZGVmIHN0cmluZ196aXAodGV4dDEsIHRleHQyKToKICAgIHJlc3VsdCA9ICIiCiAgICBmb3IgaSBpbiByYW5nZShtYXgobGVuKHRleHQxKSwgbGVuKHRleHQyKSkpOgogICAgICAgIGlmIGkgPCBsZW4odGV4dDEpOgogICAgICAgICAgICByZXN1bHQgKz0gdGV4dDFbaV0KICAgICAgICBpZiBpIDwgbGVuKHRleHQyKToKICAgICAgICAgICAgcmVzdWx0ICs9IHRleHQyW2ldCiAgICByZXR1cm4ocmVzdWx0KSAgICAK
ZGVmIHVuaXF1ZShteWxpc3QpOgogICAgcmVzdWx0ID0gW10KICAgIGZvciBpIGluIHJhbmdlKGxlbihteWxpc3QpKToKICAgICAgICBpZiBteWxpc3RbaV0gbm90IGluIHJlc3VsdDoKICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChteWxpc3RbaV0pCiAgICByZXR1cm4gcmVzdWx0Cg==
ZGVmIG1vc3RfY29tbW9uKG15bGlzdCk6ICAgIAogICAgbXlsaXN0ID0gc29ydGVkKG15bGlzdCkKICAgIG1heF92YWx1ZSwgbWF4X2NvdW50ID0gTm9uZSwgMAogICAgY3VycmVudF92YWx1ZSwgY3VycmVudF9jb3VudCA9IE5vbmUsIDAKICAgIGZvciB2YWx1ZSBpbiBteWxpc3Q6CiAgICAgICAgaWYgdmFsdWUgPT0gY3VycmVudF92YWx1ZToKICAgICAgICAgICAgY3VycmVudF9jb3VudCArPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgY3VycmVudF92YWx1ZSA9IHZhbHVlCiAgICAgICAgICAgIGN1cnJlbnRfY291bnQgPSAxCiAgICAgICAgaWYgY3VycmVudF9jb3VudCA+IG1heF9jb3VudDoKICAgICAgICAgICAgbWF4X3ZhbHVlID0gY3VycmVudF92YWx1ZQogICAgICAgICAgICBtYXhfY291bnQgPSBjdXJyZW50X2NvdW50CiAgICByZXR1cm4gbWF4X3ZhbHVlCg==
ZGVmIGZpbmRfbG9uZ2VzdF93b3JkKHdvcmRzX2xpc3QpOgogICAgbG9uZ2VzdCA9ICIiCiAgICBmb3IgdyBpbiB3b3Jkc19saXN0OgogICAgICAgIGlmIGxlbih3KSA+IGxlbihsb25nZXN0KToKICAgICAgICAgICAgbG9uZ2VzdCA9IHcKICAgIHJldHVybiBsb25nZXN0IAo=
ZGVmIG5lYXJfZmlmdHkobik6CiAgICByZXR1cm4gYWJzKG4tNTApIDw9IDEwIG9yIGFicyhuLTE1MCkgPD0gMTAK
ZGVmIGltcG9zZV9maW5lKGFnZSwgYmVlcik6CiAgICByZXR1cm4gYWdlIDwgMTggYW5kIGJlZXIK
ZGVmIG11bHRpcGxlcyhuKToKICAgIHByaW50KCJEdm9qbmFzb2JlayIsIDIqbikKICAgIHByaW50KCJUcm9qbmFzb2JlayIsIDMqbikKICAgIHByaW50KCJEZXNldGluYXNvYmVrIiwgMTAqbikgIAo=
ZGVmIHNlcXVlbmNlcyhuKToKICAgIGZvciBpIGluIHJhbmdlKG4pOgogICAgICAgIGZvciBqIGluIHJhbmdlKGkrMSk6CiAgICAgICAgICAgIHByaW50KGorMSwgZW5kPSIgIikKICAgICAgICBwcmludCgpCg==
ZGVmIHByb2R1Y3RzKG4pOgogICAgZm9yIHJvdyBpbiByYW5nZSgxLCBuICsgMSk6CiAgICAgICAgZm9yIGNvbCBpbiByYW5nZSgxLCBuICsgMSk6CiAgICAgICAgICAgIHByaW50KHJvdyAqIGNvbCwgZW5kPSIgIikKICAgICAgICBwcmludCgpCg==
ZGVmIHN0YXJzKG4pOgogICAgZm9yIGkgaW4gcmFuZ2Uobik6CiAgICAgICAgcHJpbnQoIioiLCBlbmQ9IiIpCiAgICAgICAgaWYgKGkrMSkgJSA1ID09IDA6CiAgICAgICAgICAgIHByaW50KCJ8IiwgZW5kPSIiKQogICAgcHJpbnQoKQo=
ZGVmIGNyb3NzKG4pOiAgICAKICAgIGZvciBpIGluIHJhbmdlKDMqbik6CiAgICAgICAgZm9yIGogaW4gcmFuZ2UoMypuKToKICAgICAgICAgICAgaWYgaSAvLyBuID09IDEgb3IgaiAvLyBuID09IDE6CiAgICAgICAgICAgICAgICBwcmludCgiIyIsIGVuZD0iIikKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KCIuIiwgZW5kPSIiKQogICAgICAgIHByaW50KCkK
ZGVmIHF1ZWVuKHgsIHkpOgogICAgeCAtPSAxCiAgICB5IC09IDEKICAgIGZvciBqIGluIHJhbmdlKDgpOgogICAgICAgIGZvciBpIGluIHJhbmdlKDgpOgogICAgICAgICAgICBpZiBpID09IHggYW5kIGogPT0geToKICAgICAgICAgICAgICAgIHByaW50KCJEIiwgZW5kPSIiKQogICAgICAgICAgICBlbGlmIGkgPT0geCBvciBqID09IHkgb3IgeCt5ID09IGkraiBvciB4LXkgPT0gaS1qOgogICAgICAgICAgICAgICAgcHJpbnQoIioiLCBlbmQ9IiIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludCgiLiIsIGVuZD0iIikKICAgICAgICBwcmludCgpCg==
ZGVmIGJpZ04obik6CiAgICBmb3IgaSBpbiByYW5nZShuKToKICAgICAgICBwcmludCgifCIrIiAiKmkrIlxcIisiICIqKG4tMS1pKSsifCIpCg==
ZGVmIG5pY2UoYSwgYik6CiAgICByZXR1cm4gKGEgJSAyID09IDApICE9IChiICUgMiA9PSAwKQo=
ZGVmIGhhcHB5KGEsIGIsIGMpOgogICAgcmV0dXJuIChhIDwgMyBvciBiIDwgMyBvciBjIDwgMykK
ZGVmIG9kZF9ldmVuKG4pOgogICAgZm9yIGkgaW4gcmFuZ2UoMSwgbisxKToKICAgICAgICBpZiBpICUgMiA9PSAxOgogICAgICAgICAgICBwcmludChpLCBlbmQ9IiAiKQogICAgcHJpbnQoKQogICAgcHJpbnQoIiAiLCBlbmQ9IiIpCiAgICBmb3IgaSBpbiByYW5nZSgxLCBuKzEpOgogICAgICAgIGlmIGkgJSAyID09IDA6CiAgICAgICAgICAgIHByaW50KGksIGVuZD0iICIpCiAgICBwcmludCgpCg==
ZGVmIG1ha2VfZmFuY3kodGV4dCwgbik6CiAgICBmb3IgaSBpbiByYW5nZShsZW4odGV4dCkpOgogICAgICAgIHByaW50KCIgIippICsgKHRleHRbaV0rIiAiKSpuKQo=
ZGVmIHByaW50X3N1bXMobik6CiAgICBmb3IgaSBpbiByYW5nZSgxLCBuKToKICAgICAgICBwcmludChuLCAiPSIsIGksICIrIiwgbi1pKQo=
ZGVmIHByaW50X3Byb2R1Y3RzKG4pOgogICAgZm9yIGkgaW4gcmFuZ2UoMSwgbisxKToKICAgICAgICBpZiBuICUgaSA9PSAwOgogICAgICAgICAgICBwcmludChuLCAiPSIsIGksICIqIiwgbi8vaSkK
ZGVmIHN1bV9kaWYoYSwgYik6CiAgICBwcmludChhLCAiKyIsIGIsICI9IiwgYStiKQogICAgcHJpbnQoYSwgIi0iLCBiLCAiPSIsIGEtYikK
ZGVmIGNob2NvbGF0ZShyb3dzLCBjb2x1bW5zLCB4KToKICAgIHByaW50KCJaYnl0ZWs6Iiwgcm93cypjb2x1bW5zIC0geCkK
ZGVmIHBvd2VycyhuKToKICAgIHByaW50KG4sICJuYSBkcnVob3UgamUiLCBuKioyKQogICAgcHJpbnQobiwgIm5hIHRyZXRpIGplIiwgbioqMykKICAgIHByaW50KG4sICJuYSBjdHZydG91IGplIiwgbioqNCkKCg==
ZGVmIGNyb3NzKHopOgogICAgcHJpbnQoeiwgIiAiLCB6KQogICAgcHJpbnQoIiAiLCB6KQogICAgcHJpbnQoeiwgIiAiLCB6KQo=
ZGVmIGRyYWdvbl90ZXN0KGhlYWRzLCBwaWdzKToKICAgIGlmIHBpZ3MgJSBoZWFkcyA9PSAwOgogICAgICAgIHByaW50KCJOZWJ1ZGUgYml0a2EuIikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoIkJ1ZGUgYml0a2EuIikK
ZGVmIHdlZWtzKG4pOgogICAgcHJpbnQoIlBvY2V0IGRudToiLCBuKjcpCiAgICBwcmludCgiUG9jZXQgaG9kaW46Iiwgbio3KjI0KQogICAgcHJpbnQoIlBvY2V0IG1pbnV0OiIsIG4qNyoyNCo2MCkK
ZGVmIG1pZGRsZV9udW1iZXIoYSwgYiwgYyk6CiAgICBpZiBhIDwgYjoKICAgICAgICBpZiBiIDwgYzoKICAgICAgICAgICAgcHJpbnQoYikKICAgICAgICBlbGlmIGMgPCBhOgogICAgICAgICAgICBwcmludChhKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGMpCiAgICBlbHNlOgogICAgICAgIGlmIGEgPCBjOgogICAgICAgICAgICBwcmludChhKQogICAgICAgIGVsaWYgYyA8IGI6CiAgICAgICAgICAgIHByaW50KGIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoYykK
ZGVmIGNvbXBhcmUoYSwgYik6CiAgICBpZiBhID09IGI6CiAgICAgICAgcHJpbnQoInN0ZWpuYSIpCiAgICBlbGlmIGEgPCBiOgogICAgICAgIHByaW50KGIsICJqZSB2ZXRzaSBuZXoiLCBhKQogICAgZWxzZToKICAgICAgICBwcmludChhLCAiamUgdmV0c2kgbmV6IiwgYikK
ZGVmIGNoZWNrKHAsIGspOgogICAgaWYgcCA8IDQqazoKICAgICAgICBwcmludCgiQ2h5Ymk6IiwgNCprLXApCiAgICBlbGlmIHAgPiA0Kms6CiAgICAgICAgcHJpbnQoIlByZWJ5dmE6IiwgcC00KmspCiAgICBlbHNlOgogICAgICAgIHByaW50KCJPSyIpCg==
ZGVmIHJldmVyc2VfbnVtYmVycyhuKToKICAgIGZvciBpIGluIHJhbmdlKG4pOgogICAgICAgIHByaW50KG4taSkK
ZGVmIGV2ZW5fbnVtYmVycyhuKToKICAgIGZvciBpIGluIHJhbmdlKG4pOgogICAgICAgIHByaW50KDIrMippKQo=
ZGVmIGhlal9ydXAobik6CiAgICBmb3IgaSBpbiByYW5nZShuKToKICAgICAgICBwcmludCgiaGVqIikKICAgICAgICBwcmludCgicnVwIikK
ZGVmIGFuaW1hbHMobik6CiAgICBmb3IgaSBpbiByYW5nZShuKToKICAgICAgICBwcmludCgic29iIikKICAgIGZvciBpIGluIHJhbmdlKG4qMik6CiAgICAgICAgcHJpbnQoImxvcyIpCg==
ZGVmIGJpZ19ldmVuKGEsIGIpOgogICAgcmV0dXJuIChhID4gYiBhbmQgYSAlIDIgPT0gMCkgb3IgKGIgPiBhIGFuZCBiICUgMiA9PSAwKQo=
ZGVmIHBvd2VyX3Rlc3QoYSwgYik6CiAgICBpZiBhKioyID09IGI6CiAgICAgICAgcHJpbnQoYiwgImplIGRydWhvdSBtb2NuaW5vdSIsIGEpCiAgICBlbGlmIGIqKjIgPT0gYToKICAgICAgICBwcmludChhLCAiamUgZHJ1aG91IG1vY25pbm91IiwgYikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoImJhZ3IiKQo=
ZGVmIGFyZWFfcGVyaW1ldGVyKGEpOgogICAgcHJpbnQoIm9ic2FoIiwgYSphKQogICAgcHJpbnQoIm9idm9kIiwgNCphKQo=
ZGVmIGljZWNyZWFtX3Rlc3QobW9uZXksIHByaWNlKToKICAgIHJldHVybiBtb25leSA+PSBwcmljZQo=
ZGVmIG1hZ2ljX3Rlc3QodGVhcnMsIGhvcm5zLCB0YWlscyk6CiAgICByZXR1cm4gKHRlYXJzID49IDUgYW5kIGhvcm5zID49MSkgb3IgKHRlYXJzID49MyBhbmQgdGFpbHMgPj0zKQo=
ZGVmIHByaW50X3RpY2tldChhZ2UpOgogICAgaWYgYWdlIDwgNjoKICAgICAgICBwcmljZSA9IDAKICAgIGVsaWYgYWdlIDwgMTggb3IgYWdlID4gNzA6CiAgICAgICAgcHJpY2UgPSA1MAogICAgZWxzZToKICAgICAgICBwcmljZSA9IDEwMAogICAgcHJpbnQoIkNlbmE6IiwgcHJpY2UpCg==
ZGVmIGRlY2lkZShzeW1ib2wxLCBzeW1ib2wyKToKICAgIGlmIHN5bWJvbDEgPT0gc3ltYm9sMjoKICAgICAgICBwcmludCgiUmVtaXphIikKICAgIGVsaWYgc3ltYm9sMSA9PSAiSyIgYW5kIHN5bWJvbDIgPT0gIlAiIG9yIHN5bWJvbDIgPT0gIksiIGFuZCBzeW1ib2wxID09ICJQIjoKICAgICAgICBwcmludCgiUCIpCiAgICBlbGlmIHN5bWJvbDEgPT0gIk4iIGFuZCBzeW1ib2wyID09ICJQIiBvciBzeW1ib2wyID09ICJOIiBhbmQgc3ltYm9sMSA9PSAiUCI6CiAgICAgICAgcHJpbnQoIk4iKQogICAgZWxpZiBzeW1ib2wxID09ICJLIiBhbmQgc3ltYm9sMiA9PSAiTiIgb3Igc3ltYm9sMiA9PSAiSyIgYW5kIHN5bWJvbDEgPT0gIk4iOgogICAgICAgIHByaW50KCJLIikK
ZGVmIGZvb2JhcjMobik6CiAgICBmb3IgaSBpbiByYW5nZSgxLCBuKzEpOgogICAgICAgIGlmIGkgJSAzID09IDA6CiAgICAgICAgICAgIHByaW50KGksICJmb28iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGksICJiYXIiKQo=
ZGVmIGJpZ19maXZlKG4pOgogICAgcHJpbnQoIiMiKm4pCiAgICBmb3IgaSBpbiByYW5nZShuLTIpOgogICAgICAgIHByaW50KCIjIikKICAgIHByaW50KCIjIipuKQogICAgZm9yIGkgaW4gcmFuZ2Uobi0yKToKICAgICAgICBwcmludCgiICIqKG4tMSkgKyAiIyIpCiAgICBwcmludCgiIyIqbikK
ZGVmIGZhY3Rvcml6ZShuKToKICAgIGkgPSAyCiAgICBwcmludChuLCAiPSIsIGVuZD0iICIpCiAgICB3aGlsZSBuID4gMToKICAgICAgICBpZiBuICUgaSA9PSAwOgogICAgICAgICAgICBwcmludChpLCBlbmQ9IiAiKQogICAgICAgICAgICBuID0gbiAvIGkKICAgICAgICAgICAgaWYgbiA+IDE6CiAgICAgICAgICAgICAgICBwcmludCgiKiIsIGVuZD0iICIpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgaSArPSAxCiAgICBwcmludCgpCg==
ZGVmIGZyYW1lKHRleHQsIHN5bWJvbCk6CiAgICBuID0gbGVuKHRleHQpCiAgICBwcmludChzeW1ib2wqKG4rMikpCiAgICBwcmludChzeW1ib2wrdGV4dCtzeW1ib2wpCiAgICBwcmludChzeW1ib2wqKG4rMikpCg==
ZGVmIGNoZWNrX3N1ZG9rdShyb3cpOgogICAgaWYgbGVuKHJvdykgIT0gOTogcmV0dXJuIEZhbHNlCiAgICBmb3IgaSBpbiByYW5nZSgxLCAxMCk6CiAgICAgICAgaWYgcm93LmNvdW50KGkpICE9IDE6CiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgcmV0dXJuIFRydWUK
ZGVmIGJpZ19mcmFtZSh3b3JkX2xpc3QpOgogICAgbiA9IG1heChtYXAobGVuLCB3b3JkX2xpc3QpKQogICAgcHJpbnQoIisiKihuKzIpKQogICAgZm9yIHcgaW4gd29yZF9saXN0OgogICAgICAgIHByaW50KCIrIiArIHcgKyAiICIqKG4tbGVuKHcpKSsiKyIpCiAgICBwcmludCgiKyIqKG4rMikpCg==
ZGVmIGJpZ19jaGVzc2JvYXJkKG4sIG0pOgogICAgZm9yIGkgaW4gcmFuZ2UobiAqIG0pOgogICAgICAgIGZvciBqIGluIHJhbmdlKG4gKiBtKToKICAgICAgICAgICAgaWYgKChpIC8vIG0pICsgKGogLy8gbSkpICUgMiA9PSAwOgogICAgICAgICAgICAgICAgcHJpbnQoJyMnLCBlbmQ9IiIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludCgnLicsIGVuZD0iIikKICAgICAgICBwcmludCgpCg==
ZGVmIG5lc3RlZF9zcXVhcmVzKG4pOgogICAgbSA9IDIqbi0yCiAgICBmb3IgeSBpbiByYW5nZSgtbSwgbSArIDEpOgogICAgICAgIGZvciB4IGluIHJhbmdlKC1tLCBtICsgMSk6CiAgICAgICAgICAgIGlmIHggJSAyID09IDAgYW5kIGFicyh4KSA+PSBhYnMoeSkgb3IgeSAlIDIgPT0gMCBhbmQgYWJzKHkpID49IGFicyh4KToKICAgICAgICAgICAgICAgIHByaW50KCIjIiwgZW5kPSIiKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoIiAiLCBlbmQ9IiIpCiAgICAgICAgcHJpbnQoKQo=
